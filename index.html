<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>λ™μ‚¬ λ³€ν• ν•™μµ & 4μ§€μ„ λ‹¤ ν€΄μ¦</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- μ™Έλ¶€ CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- μƒλ‹¨ -->
    <div class="topbar">
      <div class="brand">λ™μ‚¬ λ³€ν• ν•™μµ Β· 4μ§€μ„ λ‹¤ ν€΄μ¦</div>
      <div class="stats">
        π” <label style="cursor:pointer">
          <input type="checkbox" id="mute" /> μμ†κ±°
        </label> Β·
        μ •λ‹µ <span id="ok">0</span> Β· 
        μ¤λ‹µ <span id="no">0</span> Β· 
        λ‚¨μ€ <span id="left">0</span> Β· 
        μ„ΈνΈ <span id="setIdx">1</span>/<span id="setTotal">1</span>
      </div>
    </div>

    <!-- μµμ…/μ§„ν–‰λ°” -->
    <div class="panel">
      <div class="controls">
        <div>
          <label>λ¨λ“</label>
          <select id="mode">
            <option value="study">ν•™μµ(μ½μ–΄μ£ΌκΈ°)</option>
            <option value="quiz">ν€΄μ¦(4μ§€μ„ λ‹¤)</option>
          </select>
        </div>
        <div>
          <label>μ„ΈνΈ ν¬κΈ°</label>
          <select id="setSize">
            <option value="20" selected>20</option>
            <option value="10">10</option>
            <option value="30">30</option>
          </select>
        </div>
        <div>
          <label>ν¨ν„΄ ν•„ν„°</label>
          <select id="patternFilter">
            <option value="all">μ „μ²΄</option>
            <option value="AAA">AAA</option>
            <option value="ABB">ABB</option>
            <option value="ABA">ABA</option>
            <option value="ABC">ABC</option>
            <option value="REG">REG</option>
          </select>
        </div>
        <div class="row">
          <label style="width:100%">ν•™μµ μ†λ„ <span id="spdTxt">1.0</span>x</label>
          <input type="range" id="rate" min="0.8" max="1.2" step="0.05" value="1.0" />
        </div>
        <div class="row">
          <label><input type="checkbox" id="autoNext" /> μλ™ λ‹¤μ(ν•™μµ)</label>
        </div>
        <div class="row">
          <label><input type="checkbox" id="onlyWrong" /> μ¤λ‹µ μ „μ©(μ„ΈνΈ λλ‚λ©΄ μ¤λ‹µλ§ μ¬λ„μ „)</label>
        </div>
      </div>
      <div class="progress">
        <div class="bar"><i id="bar"></i></div>
        <div class="small"><span id="progTxt">0 / 0</span></div>
      </div>
    </div>

    <!-- λ³Έλ¬Έ: ν•™μµ & ν€΄μ¦ -->
    <div class="screens">
      <!-- μΆμΈ΅: λ©”μΈ μΉ΄λ“ -->
      <div class="card">
        <div class="prompt-tag" id="promptTag">ν•™μµ μΉ΄λ“</div>

        <!-- ν•™μµ ν™”λ©΄ -->
        <div id="screenStudy">
          <div class="word-big" id="bWord">ready?</div>
          <div class="mean" id="krMeaning">λ»: -</div>
          <div class="triple">
            <span class="pill" id="pBase">base</span>
            <span class="pill" id="pPast">past</span>
            <span class="pill" id="pPP">pp</span>
          </div>
          <div class="row" style="gap:8px; margin-top:8px">
            <button class="btn" id="btnPlay">β–¶ μ½κΈ°</button>
            <button class="btn secondary" id="btnRepeat">β³ λ°λ³µ</button>
            <button class="btn secondary" id="btnStop">β—Ό μ •μ§€</button>
            <button class="btn warn" id="btnNext">λ‹¤μ</button>
            <button class="btn ghost" id="btnPrev">μ΄μ „</button>
          </div>
        </div>

        <!-- ν€΄μ¦ ν™”λ©΄ -->
        <div id="screenQuiz" class="hidden" style="width:100%">
          <div class="word-big" id="qBase">ready?</div>
          <div class="small" style="margin-bottom:8px">
            μ μ‹λ <b>ν„μ¬ν•</b>μ— λ§λ” <b>ν„μ¬ν•β€“κ³Όκ±°ν•β€“κ³Όκ±°λ¶„μ‚¬ν•</b> μ„ΈνΈλ¥Ό κ³ λ¥΄μ„Έμ”. (μ„ νƒ μ¦‰μ‹ λ‹¤μ λ¬Έμ )
          </div>
          <div class="qopts" id="opts"></div>
        </div>
      </div>

      <!-- μ°μΈ΅: λ³΄μ΅° ν¨λ„ -->
      <div class="right">
        <div class="row">
          <button class="btn ghost" id="btnStartStudy">μ΄ μ„ΈνΈ ν•™μµ μ‹μ‘</button>
          <button class="btn ghost" id="btnStartQuiz">μ„ΈνΈ ν€΄μ¦ μ‹μ‘</button>
          <button class="btn ghost" id="btnNextSet">λ‹¤μ μ„ΈνΈ β–¶</button>
        </div>
        <div>
          <div class="small">μµκ·Ό μ •λ‹µ</div>
          <div id="history" class="row"></div>
        </div>
        <div>
          <div class="small">μ¤λ‹µ λ©λ΅ (<span id="wcount">0</span>) β€” μ¤λ‹µ μ „μ©μΌλ΅ μ¬λ„μ „ κ°€λ¥</div>
          <div id="wrongs" class="row"></div>
        </div>
      </div>
    </div>

    <!-- ν•λ‹¨ -->
    <div class="footer">
      <div class="left">
        <button class="btn ghost" id="btnReset">μ΄κΈ°ν™”</button>
        <button class="btn ghost" id="btnWrongOnly">μ¤λ‹µλ§ ν’€κΈ°</button>
      </div>
      <div class="right small">
        ν¨κ³Όμ: <code>audio/correct.mp3</code>, <code>audio/wrong.mp3</code>
      </div>
    </div>
  </div>

  <!-- ν¨κ³Όμ -->
  <audio id="sndCorrect" src="audio/correct.mp3" preload="auto"></audio>
  <audio id="sndWrong"   src="audio/wrong.mp3"   preload="auto"></audio>

  <!-- λ¨λ‹¬ -->
  <div class="modal" id="modal">
    <div class="box">
      <h3 id="modalTitle">μ•λ¦Ό</h3>
      <div id="modalBody" class="small" style="line-height:1.6"></div>
      <div class="row" style="margin-top:12px; gap:8px; justify-content:flex-end">
        <button class="btn secondary" id="btnModalClose">λ‹«κΈ°</button>
        <button class="btn" id="btnModalAction">ν€΄μ¦ μ‹μ‘</button>
      </div>
    </div>
  </div>

  <!-- μ™Έλ¶€ JS -->
  <script src="app.js"></script>
</body>
</html>
