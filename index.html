<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>동사 변형 학습 & 4지선다 퀴즈</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.webmanifest">
  <meta name="theme-color" content="#0f172a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- 외부 CSS -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="app">
    <!-- 상단 -->
    <div class="topbar">
      <div class="brand">동사 변형 학습 · 4지선다 퀴즈</div>
      <div class="stats">
        🔊 <label style="cursor:pointer">
          <input type="checkbox" id="mute" /> 음소거
        </label> ·
        정답 <span id="ok">0</span> · 
        오답 <span id="no">0</span> · 
        남은 <span id="left">0</span> · 
        세트 <span id="setIdx">1</span>/<span id="setTotal">1</span>
      </div>
    </div>

    <!-- 옵션/진행바 -->
    <div class="panel">
      <div class="controls">
        <div>
          <label>모드</label>
          <select id="mode">
            <option value="study">학습(읽어주기)</option>
            <option value="quiz">퀴즈(4지선다)</option>
          </select>
        </div>
        <div>
          <label>세트 크기</label>
          <select id="setSize">
            <option value="20" selected>20</option>
            <option value="10">10</option>
            <option value="30">30</option>
          </select>
        </div>
        <div>
          <label>패턴 필터</label>
          <select id="patternFilter">
            <option value="all">전체</option>
            <option value="AAA">AAA</option>
            <option value="ABB">ABB</option>
            <option value="ABA">ABA</option>
            <option value="ABC">ABC</option>
            <option value="REG">REG</option>
          </select>
        </div>
        <div class="row">
          <label style="width:100%">학습 속도 <span id="spdTxt">1.0</span>x</label>
          <input type="range" id="rate" min="0.8" max="1.2" step="0.05" value="1.0" />
        </div>
        <div class="row">
          <label><input type="checkbox" id="autoNext" /> 자동 다음(학습)</label>
        </div>
        <div class="row">
          <label><input type="checkbox" id="onlyWrong" /> 오답 전용(세트 끝나면 오답만 재도전)</label>
        </div>
      </div>
      <div class="progress">
        <div class="bar"><i id="bar"></i></div>
        <div class="small"><span id="progTxt">0 / 0</span></div>
      </div>
    </div>

    <!-- 본문: 학습 & 퀴즈 -->
    <div class="screens">
      <!-- 좌측: 메인 카드 -->
      <div class="card">
        <div class="prompt-tag" id="promptTag">학습 카드</div>

        <!-- 학습 화면 -->
        <div id="screenStudy">
          <div class="word-big" id="bWord">ready?</div>
          <div class="mean" id="krMeaning">뜻: -</div>
          <div class="triple">
            <span class="pill" id="pBase">base</span>
            <span class="pill" id="pPast">past</span>
            <span class="pill" id="pPP">pp</span>
          </div>
          <div class="row" style="gap:8px; margin-top:8px">
            <button class="btn" id="btnPlay">▶ 읽기</button>
            <button class="btn secondary" id="btnRepeat">⟳ 반복</button>
            <button class="btn secondary" id="btnStop">◼ 정지</button>
            <button class="btn warn" id="btnNext">다음</button>
            <button class="btn ghost" id="btnPrev">이전</button>
          </div>
        </div>

        <!-- 퀴즈 화면 -->
        <div id="screenQuiz" class="hidden" style="width:100%">
          <div class="word-big" id="qBase">ready?</div>
          <div class="small" style="margin-bottom:8px">
            제시된 <b>현재형</b>에 맞는 <b>현재형–과거형–과거분사형</b> 세트를 고르세요. (선택 즉시 다음 문제)
          </div>
          <div class="qopts" id="opts"></div>
        </div>
      </div>

      <!-- 우측: 보조 패널 -->
      <div class="right">
        <div class="row">
          <button class="btn ghost" id="btnStartStudy">이 세트 학습 시작</button>
          <button class="btn ghost" id="btnStartQuiz">세트 퀴즈 시작</button>
          <button class="btn ghost" id="btnNextSet">다음 세트 ▶</button>
        </div>
        <div>
          <div class="small">최근 정답</div>
          <div id="history" class="row"></div>
        </div>
        <div>
          <div class="small">오답 목록 (<span id="wcount">0</span>) — 오답 전용으로 재도전 가능</div>
          <div id="wrongs" class="row"></div>
        </div>
      </div>
    </div>

    <!-- 하단 -->
    <div class="footer">
      <div class="left">
        <button class="btn ghost" id="btnReset">초기화</button>
        <button class="btn ghost" id="btnWrongOnly">오답만 풀기</button>
      </div>
      <div class="right small">
        효과음: <code>audio/correct.mp3</code>, <code>audio/wrong.mp3</code>
      </div>
    </div>
  </div>

  <!-- 효과음 -->
  <audio id="sndCorrect" src="audio/correct.mp3" preload="auto"></audio>
  <audio id="sndWrong"   src="audio/wrong.mp3"   preload="auto"></audio>

  <!-- 모달 -->
  <div class="modal" id="modal">
    <div class="box">
      <h3 id="modalTitle">알림</h3>
      <div id="modalBody" class="small" style="line-height:1.6"></div>
      <div class="row" style="margin-top:12px; gap:8px; justify-content:flex-end">
        <button class="btn secondary" id="btnModalClose">닫기</button>
        <button class="btn" id="btnModalAction">퀴즈 시작</button>
      </div>
    </div>
  </div>

  <!-- 외부 JS -->
  <script src="app.js"></script>
</body>
</html>
